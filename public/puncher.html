<html>
  <head>
  <!-- Easel JS -->
    <script src="https://code.createjs.com/easeljs-0.8.1.min.js"></script>
  <!-- Tween JS -->
    <script src="https://code.createjs.com/tweenjs-0.6.1.min.js"></script>
  <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
  <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="./css/styles.css" />

    <script>
      //replace mouse cursor with boxing glove
      $(document).ready(function(){
        $('#gameCanvas').mouseout(function(){
          $('#mycursor').hide();
          return false;
        });
        $('#gameCanvas').mouseenter(function(){
          $('#mycursor').show();
          return false;
        });
        $('#gameCanvas').mousemove(function(e){
          $('#mycursor').css('left', e.clientX - 20).css('top', e.clientY + 7);
        });
      });
      //setting up stage for game
      var stage; 
      var canvas;
      var mole;
      //array of functions to push moles from random locations
      var path = [pathOne, pathTwo, pathThree, pathFour];
      function init(){
    
        createjs.MotionGuidePlugin.install(createjs.Tween);

        canvas = document.getElementById("gameCanvas");
        stage = new createjs.Stage(canvas);
        stage.autoClear = true;
        window.addEventListener('resize', updateCanvasSize);
        updateCanvasSize();

        target();

        //calling balls to shoot
        setInterval(shootMoles, 4000);

        createjs.Ticker.setFPS(600);
        createjs.Ticker.addEventListener("tick", stage);
      }

      function punchMole(mole){
        mole.addEventListener("mouseover", function(event){
          //if glove coordinates are higher than mole coordinates
          if (stage.mouseX > mole.x && stage.mouseY > mole.y)
            {createjs.Tween.get(mole)
              .to({ x: mole.x-random()-400, y: mole.y-random()-400}, 2000, createjs.EasePowIn(5))
            }
            //if glove coordinates are less than mole coordinates
            else if (stage.mouseX < mole.x && stage.mouseY < mole.y)
            {createjs.Tween.get(mole)
              .to({ x: mole.x+random()+400, y: mole.y+random()+400}, 2000, createjs.EasePowIn(5))
            }
            //if glove x coordinate is more and y coordinate is less than mole coordinates
            else if (stage.mouseX > mole.x && stage.mouseY < mole.y)
            {createjs.Tween.get(mole)
              .to({ x: mole.x-random()-400, y: mole.y+random()+400}, 2000, createjs.EasePowIn(5))
            }
            else
            {createjs.Tween.get(mole)
              .to({ x: mole.x-random()+400, y: mole.y-random()-400}, 2000, createjs.EasePowIn(5))
            }
        });
      };

      function updateCanvasSize(){
        var w = window.innerWidth;
        var h = window.innerHeight;

        canvas.width = w;
        canvas.height = h;
      }

      function shootMoles(){
        for ( i = 0; i < path.length; i++){
         setInterval(path[i](), 2000);
        }
      }

      function target(){
        ring = new createjs.Shape();
        ring.graphics.ss(5, 'round', 'round').s(('#ececec')).dc(0,0,canvas.height*0.225);
        ring.x = canvas.width * 0.5;
        ring.y = canvas.height * 0.5;
        stage.addChild(ring);
      }

      function makeMole(){
        mole = new createjs.Shape();
        mole.graphics.ss(1, 'round', 'round').f("#" + rc() +rc() +rc()).dc(0,0,30).ef().es();
        punchMole(mole);
        stage.addChild(mole);
      }

      function pathOne(){
        makeMole();
        createjs.Tween.get(mole)
        //from left to right
        .to({guide: {path: [-30,ry(), rx(),ry(), canvas.width+30,ry()]}}, 3000);
      }

      function pathTwo(){
        makeMole();
        createjs.Tween.get(mole)
        //from right to left
        .to({guide: {path: [canvas.width+30,ry(), canvas.width*0.5,canvas.height*0.5, -30,ry()]}}, 3000);
      }

      function pathThree(){
        makeMole();
        createjs.Tween.get(mole)
        //from top to bottom
        .to({guide: {path: [rx(),-30, canvas.width*0.5,canvas.height*0.5, rx(),canvas.height+30]}}, 3000);
      }

      function pathFour(){
        makeMole();
        createjs.Tween.get(mole)
        //from bottom to top
        .to({guide: {path: [rx(),canvas.height, canvas.width*0.5,canvas.height*0.5, rx(),-30]}}, 3000);
      }

      function rx() {
        return Math.random() * 2580 + 10;
      }
      function ry() {
        return Math.random() * 600 + 10;
      }
      function rc() {
        return Math.round(Math.random() * 0xED + 0x12).toString(16);
      }
    </script>
    <style>
     body {
      background-color: #000;
     }
    </style>
  </head>
  <!-- load init function -->
  <body onload="init();">
    <!-- defines canvas size -->
    <canvas id="gameCanvas"></canvas>
    <div id="mycursor"></div>
  </body>
</html>
